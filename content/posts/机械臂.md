back to [[Mujoco室内搬运物流车]]；
	【legacy link】back to [[项目回顾]]

仿真环境配置：[[WSL安装笔记]]；
远程X11协议转发配置X11转发配置]];

mujoco编译安装：[[mujoco相关笔记]];
cmake项目引入mujoco：[[CMake项目引入Mujoco]];

---
title: "机械臂"
excerpt: "记录了机械臂的建模过程"
author: "Wang Eden"
date: "2025-02-14"
tags: ["机器人", "机械臂", "建模"]
category: "机器人"
cover: "/imgs/articleCover/机械臂.jpg"
views: 2437
featured: true
slug: "机械臂"

---
###### Tag
<u>建模过程记录：</u>

- [x] 1.solidworks输出urdf，之后转mjcf；
- [x] 2.机械臂正运动学D-H建模；
- [ ] 3.Solidworks计算惯性参数，并调整mjcf模型参数；

<u>目录</u>
1. [[#正向运动学D-H建模（改进D-H法）]]；
2. [[#Matlab运动学校验]]；

### 正向运动学D-H建模（改进D-H法）

**确定DH参数（即$\alpha_i,~a_i,~\theta_i,~d_i$）**
机械臂模型及坐标系如下标识：
![[Pasted image 20250212044818.png]]

正向转动：按右手螺旋定则
$\alpha_i$ 为绕$\hat{X}_i$ 轴从$\hat{Z}_i$ 到$\hat{Z}_{i+1}$ 的转角，绕$\hat{X}_i$ 正向转动方向为正；
$a_i$ 为沿$\hat{X}_i$ 轴从$\hat{Z}_i$ 到$\hat{Z}_{i+1}$ 的距离，与$\hat{X}_i$ 方向相同为正；
$\theta_i$ 为绕$\hat{Z}_{i}$ 轴（同时也是$\hat{Z}_{i+1}$ 轴）从$\hat{X}_{i}$ 到$\hat{X}_{i+1}$ 的转角，绕$\hat{Z}_{i}$ 正向转动方向为正；
$d_i$ 为沿$\hat{Z}_{i}$ 轴（同时也是$\hat{Z}_{i+1}$ 轴）从$\hat{X}_{i}$ 到$\hat{X}_{i+1}$ 的距离，与$\hat{Z}_{i}$ 方向相同为正；

也可以理解为，按照上述四个步骤旋转、移动、旋转、移动，从上一个坐标系变换到下一个坐标系的过程中用到的四个参数；
改进D-H法的关键在于保证前后两个坐标系的Z轴是严格对齐的，方便后续的计算；
这里需要注意的是$\theta_i$ 是会随着机械臂的运动而变化的，其实也是机械臂运动过程关节电机的旋转角度，全为0时为初始状态；

距离单位：mm，角度单位：rad
D-H表如下：

|   name   |  i  |  $\alpha_i$   | $a_i$  | $\theta_i$ | $d_i$ |
| :------: | :-: | :-----------: | :----: | :--------: | :---: |
|   base   |  1  |       0       |   0    | $\theta_1$ | 85.25 |
| shoulder |  2  | $\pi \over 2$ |   0    | $\theta_2$ | 48.1  |
|  elbow   |  3  |       0       | 128.93 | $\theta_3$ |   0   |
|  wrist   |  4  |       0       |  129   | $\theta_4$ | 48.55 |
其中$$\begin{align}
\theta_1&=\Delta\theta_1 \\
\theta_2&={\pi\over2}+\Delta\theta_2 \\
\theta_3&=\Delta\theta_3 \\
\theta_4&=-{\pi\over2}+\Delta\theta_4 \\
\end{align}$$
即坐标计算时，相对于电机目标旋转角度有一个初始值；

**计算D-H变换矩阵**
根据D-H参数计算D-H变换矩阵，其计算公式如下：
$$
\begin{align}
T_i^{i-1} &= Rx​(αi​)⋅Dx​(ai​)⋅Rz​(θi​)⋅Dz​(di​) \\ 
&= \begin{bmatrix}
\cos\theta_i & -\sin\theta_i & 0 & a_i \\
\sin\theta_i\cos\alpha_i & \cos\theta_i\cos\alpha_i & -\sin\alpha_i & -d_i\sin\alpha_i \\
\sin\theta_i\sin\alpha_i & \cos\theta_i\sin\alpha_i & \cos\alpha_i & d_i\cos\alpha_i \\
0 & 0 & 0 & 1
\end{bmatrix}
\end{align}
$$
由两次旋转和两次平移构成；

该机械臂为4自由度的机械臂，因此四个变换矩阵即可完成机械臂的正运动学变换；

最终得到如下变换矩阵：
$$
T^0_4 = \begin{bmatrix}
r_{11} & r_{12} & r_{13} & p_x \\
r_{21} & r_{22} & r_{23} & p_y \\
r_{31} & r_{32} & r_{33} & p_z \\
0 & 0 & 0 & 1 \\
\end{bmatrix}
$$
其中 $(p_x, p_y, p_z)$ 即末端执行器在基座坐标系中的坐标，同时将旋转矩阵转化成欧拉角就能得到末端执行器相对于基座坐标系的姿态；


1.旋转矩阵为什么只有三个自由度？
	单位向量 x3，互相垂直 x3 9-6=3
2.可达空间，灵巧工作空间

### Matlab运动学校验

正向运动学校验：
	计算公式、代码（待补充）