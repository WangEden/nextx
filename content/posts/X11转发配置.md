back to [[机械臂]]；
back to [[2025年8月21日]]；

---
title: "X11转发配置"
excerpt: "记录X11转发的配置过程"
author: "Wang Eden"
date: "2025-08-19"
tags: ["配置", "X11"]
category: "配置"
cover: "/imgs/articleCover/X11转发配置.jpg"  # 放在 public 下，路径以 / 开头
views: 2437
featured: false
slug: "X11转发配置"

---
###### 相关说明
此笔记用于记录在Windows端通过ssh连接远程Linux服务器时，将远程服务器的应用程序界面转发至本地Windows电脑端显示的相关配置

<u>Windows端配置</u>
1.下载软件VcXsrv
启动XLaunch → 选择Multiple Windows → Start no client；
显示器number输入0，不要用默认的-1；
排查时可勾上 Disable access control；

2.防火墙开启6000端口并启用TCP
控制面板 → 系统和安全 → Windows Defender防火墙 → 高级设置；
点左边 <u>入站规则</u>，在列表中找到 VcXrv windows xserver相关的规则，任意选择一项双击，看允许的程序是否包含6000端口，或允许所有端口；
状态是 ==已启用== 操作是 ==允许连接== 另外需要点到 <u>协议和端口</u> 一项，将协议类型改为 ==TCP==，作用范围（域/专用/公用网络）都勾上；
可以在powershell中检查是否真的在监听6000端口；
输入命令：
```powershell
netstat -ano | findstr 6000
```
正常启动时输出：
```
TCP    0.0.0.0:6000   0.0.0.0:0   LISTENING   <PID>
```

3.修改ssh的config
在C:/用户/.ssh目录下，修改config文件，目录地址：
```
%USERPROFILE%.ssh\config
```
加入这一项：
```nginx
Host EdenServer
    HostName 服务器IP
    User eden
    ForwardX11 yes
    ForwardX11Trusted yes
```
或在ssh连接时，启用-Y参数，即：
```
ssh -Y -p 5080 eden@wangeden.top
```

<u>远程端配置</u>
修改/etc/ssh/sshd_config
需要修改以下两项：
X11Forwarding yes
X11UseLocalhost yes
可通过该命令检查：
```bash
grep -E 'X11Forwarding|X11UseLocalhost' /etc/ssh/sshd_config
```
修改后需要重启ssh服务：
```bash
sudo systemctl restart ssh
```


